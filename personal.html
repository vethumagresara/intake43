<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Personal Detail Form - Intake 43 Day Scholars</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #1e3c72 0%, #2a5298 35%, #87CEEB 70%, #FFA500 100%);
      min-height: 100vh;
      padding: 20px 0;
    }

    .container {
      max-width: 1000px;
      margin: 0 auto;
      background: white;
      border-radius: 25px;
      box-shadow: 0 25px 50px rgba(0,0,0,0.15);
      overflow: hidden;
      border: 3px solid #FFA500;
    }

    h1 {
      background: linear-gradient(135deg, #1e3c72, #2a5298, #87CEEB);
      color: white;
      text-align: center;
      padding: 40px 30px;
      font-size: 2.2rem;
      font-weight: 700;
      text-shadow: 0 3px 6px rgba(0,0,0,0.3);
      letter-spacing: 1px;
      border-bottom: 4px solid #FFA500;
    }

    #personalForm {
      padding: 50px;
      background: linear-gradient(to bottom, #ffffff 0%, #f8fdff 100%);
    }

    .card {
      background: linear-gradient(145deg, #ffffff 0%, #f0f8ff 100%);
      border-radius: 20px;
      padding: 35px;
      margin-bottom: 35px;
      border-left: 6px solid #2a5298;
      border-right: 6px solid #FFA500;
      box-shadow: 0 8px 25px rgba(0,0,0,0.12);
      transition: all 0.4s ease;
      position: relative;
      overflow: hidden;
    }

    .card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 3px;
      background: linear-gradient(90deg, #1e3c72, #87CEEB, #FFA500);
    }

    .card:hover {
      transform: translateY(-3px);
      box-shadow: 0 15px 35px rgba(0,0,0,0.18);
    }

    .card h2 {
      color: #1e3c72;
      margin-bottom: 30px;
      font-size: 1.5rem;
      font-weight: 700;
      display: flex;
      align-items: center;
      gap: 15px;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .card h2::before {
      content: "📋";
      font-size: 1.4rem;
      padding: 8px;
      background: linear-gradient(135deg, #87CEEB, #FFA500);
      border-radius: 50%;
    }

    .card h3 {
      color: #2a5298;
      margin: 25px 0 20px 0;
      font-size: 1.2rem;
      font-weight: 600;
      padding-bottom: 12px;
      border-bottom: 3px solid #87CEEB;
      position: relative;
    }

    .card h3::after {
      content: '';
      position: absolute;
      bottom: -3px;
      left: 0;
      width: 50px;
      height: 3px;
      background: #FFA500;
    }

    label {
      display: block;
      margin-bottom: 18px;
      color: #1e3c72;
      font-weight: 600;
      position: relative;
      font-size: 14px;
    }

    .required {
      color: #e74c3c;
      font-weight: bold;
      margin-left: 3px;
    }

    input[type="text"], input[type="email"], input[type="tel"], input[type="date"], input, select {
      width: 100%;
      padding: 14px 18px;
      border: 2px solid #e6f3ff;
      border-radius: 12px;
      font-size: 14px;
      transition: all 0.4s ease;
      background: linear-gradient(145deg, #ffffff 0%, #f8fdff 100%);
      margin-top: 8px;
      font-family: inherit;
    }

    input[type="text"]:focus, input[type="email"]:focus, input[type="tel"]:focus, input[type="date"]:focus, input:focus, select:focus {
      outline: none;
      border-color: #2a5298;
      box-shadow: 0 0 0 4px rgba(42, 82, 152, 0.15);
      transform: translateY(-2px);
      background: white;
    }

    input:required {
      border-left: 4px solid #FFA500;
    }

    input:required:invalid {
      border-color: #e74c3c;
    }

    input:required:valid {
      border-color: #27ae60;
    }

    input[type="radio"] {
      width: auto;
      margin: 0 10px 0 20px;
      transform: scale(1.3);
      accent-color: #2a5298;
    }

    input[type="checkbox"] {
      width: auto;
      margin-right: 10px;
      transform: scale(1.3);
      accent-color: #FFA500;
    }

    .radio-group {
      display: flex;
      gap: 25px;
      margin-top: 12px;
    }

    .checkbox-group {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
      gap: 18px;
      margin-top: 15px;
    }

    .checkbox-item {
      display: flex;
      align-items: center;
      padding: 15px;
      background: linear-gradient(145deg, #ffffff 0%, #f0f8ff 100%);
      border-radius: 12px;
      border: 2px solid #e6f3ff;
      transition: all 0.3s ease;
      cursor: pointer;
    }

    .checkbox-item:hover {
      border-color: #2a5298;
      background: linear-gradient(145deg, #f8fdff 0%, #e6f3ff 100%);
      transform: translateY(-1px);
    }

    .form-row {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 25px;
      margin-bottom: 18px;
    }

    .form-row-3 {
      display: grid;
      grid-template-columns: 1fr 1fr 1fr;
      gap: 20px;
      margin-bottom: 18px;
    }

    .dynamic-section {
      background: linear-gradient(145deg, #f8fdff 0%, #ffffff 100%);
      border-radius: 15px;
      padding: 25px;
      margin: 20px 0;
      border: 2px solid #e6f3ff;
      border-left: 4px solid #87CEEB;
    }

    .dynamic-row {
      display: flex;
      gap: 18px;
      align-items: end;
      margin-bottom: 18px;
      padding: 20px;
      background: linear-gradient(145deg, #ffffff 0%, #f0f8ff 100%);
      border-radius: 12px;
      border-left: 4px solid #2a5298;
      box-shadow: 0 3px 10px rgba(0,0,0,0.05);
    }

    .dynamic-row input, .dynamic-row select {
      flex: 1;
      margin-top: 0;
    }

    button {
      padding: 14px 28px;
      border: none;
      border-radius: 12px;
      font-size: 14px;
      font-weight: 700;
      cursor: pointer;
      transition: all 0.4s ease;
      text-transform: uppercase;
      letter-spacing: 1px;
      font-family: inherit;
    }

    button[type="button"] {
      background: linear-gradient(135deg, #87CEEB, #2a5298);
      color: white;
      margin-top: 20px;
      border: 2px solid transparent;
    }

    button[type="button"]:hover {
      background: linear-gradient(135deg, #2a5298, #1e3c72);
      transform: translateY(-2px);
      box-shadow: 0 8px 20px rgba(42, 82, 152, 0.3);
    }

    .actions {
      display: flex;
      gap: 25px;
      justify-content: center;
      margin-top: 50px;
      padding-top: 40px;
      border-top: 3px solid #e6f3ff;
    }

    .btn {
      padding: 18px 45px;
      font-size: 16px;
      border-radius: 50px;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 1.2px;
      min-width: 180px;
      transition: all 0.4s ease;
    }

    .btn.primary {
      background: linear-gradient(135deg, #FFA500, #FF8C00);
      color: white;
      box-shadow: 0 8px 20px rgba(255, 165, 0, 0.3);
      border: 3px solid #FF8C00;
    }

    .btn.primary:hover {
      background: linear-gradient(135deg, #FF8C00, #FF7F00);
      transform: translateY(-3px);
      box-shadow: 0 12px 30px rgba(255, 165, 0, 0.4);
    }

    .btn:not(.primary) {
      background: linear-gradient(135deg, #87CEEB, #5F9EA0);
      color: white;
      border: 3px solid #5F9EA0;
    }

    .btn:not(.primary):hover {
      background: linear-gradient(135deg, #5F9EA0, #4682B4);
      transform: translateY(-3px);
      box-shadow: 0 12px 30px rgba(95, 158, 160, 0.4);
    }

    .photo-upload {
      text-align: center;
      padding: 40px;
      border: 3px dashed #2a5298;
      border-radius: 20px;
      background: linear-gradient(145deg, #f8fdff 0%, #e6f3ff 100%);
      margin: 25px 0;
      transition: all 0.4s ease;
    }

    .photo-upload:hover {
      border-color: #FFA500;
      background: linear-gradient(145deg, #fff5e6 0%, #ffe6cc 100%);
      transform: translateY(-2px);
    }

    .photo-upload input[type="file"] {
      margin: 15px 0;
      padding: 12px;
      border: 2px solid #87CEEB;
      background: white;
      border-radius: 10px;
      font-weight: 600;
    }

    .certification {
      background: linear-gradient(145deg, #e6f3ff 0%, #cce7ff 100%);
      border: 3px solid #2a5298;
      border-radius: 15px;
      padding: 25px;
      margin: 25px 0;
      text-align: center;
      font-weight: 600;
      color: #1e3c72;
    }

    .progress-bar {
      position: fixed;
      top: 0;
      left: 0;
      height: 5px;
      background: linear-gradient(90deg, #1e3c72, #87CEEB, #FFA500);
      z-index: 1000;
      transition: width 0.4s ease;
      box-shadow: 0 2px 10px rgba(255, 165, 0, 0.3);
    }

    .footer {
      text-align: center;
      padding: 30px;
      background: linear-gradient(135deg, #1e3c72, #2a5298);
      color: white;
      font-size: 14px;
      font-weight: 500;
      letter-spacing: 0.5px;
    }

    .footer .copyright {
      color: #87CEEB;
      font-weight: 600;
    }

    @media (max-width: 768px) {
      .container {
        margin: 15px;
        border-radius: 20px;
      }

      #personalForm {
        padding: 30px 25px;
      }

      .form-row, .form-row-3 {
        grid-template-columns: 1fr;
      }

      h1 {
        font-size: 1.6rem;
        padding: 25px 20px;
      }

      .actions {
        flex-direction: column;
        align-items: center;
      }

      .dynamic-row {
        flex-direction: column;
        gap: 15px;
      }

      .card {
        padding: 25px 20px;
      }
    }

    /* Loading animation */
    .loading {
      display: inline-block;
      width: 20px;
      height: 20px;
      border: 2px solid #f3f3f3;
      border-top: 2px solid #FFA500;
      border-radius: 50%;
      animation: spin 1s linear infinite;
      margin-left: 10px;
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    /* Section icons */
    .card h2[data-section="1"]::before { content: "👤"; background: linear-gradient(135deg, #87CEEB, #2a5298); }
    .card h2[data-section="2"]::before { content: "📏"; background: linear-gradient(135deg, #FFA500, #FF8C00); }
    .card h2[data-section="3"]::before { content: "🏦"; background: linear-gradient(135deg, #87CEEB, #2a5298); }
    .card h2[data-section="4"]::before { content: "🏫"; background: linear-gradient(135deg, #FFA500, #FF8C00); }
    .card h2[data-section="5"]::before { content: "🎓"; background: linear-gradient(135deg, #87CEEB, #2a5298); }
    .card h2[data-section="6"]::before { content: "⚽"; background: linear-gradient(135deg, #FFA500, #FF8C00); }
    .card h2[data-section="7"]::before { content: "🎨"; background: linear-gradient(135deg, #87CEEB, #2a5298); }
    .card h2[data-section="8"]::before { content: "🗣️"; background: linear-gradient(135deg, #FFA500, #FF8C00); }
    .card h2[data-section="9"]::before { content: "👨‍👩‍👧‍👦"; background: linear-gradient(135deg, #87CEEB, #2a5298); }
    .card h2[data-section="10"]::before { content: "👥"; background: linear-gradient(135deg, #FFA500, #FF8C00); }

    /* Smooth scroll */
    html {
      scroll-behavior: smooth;
    }

    /* Error styling */
    .error {
      border-color: #e74c3c !important;
      box-shadow: 0 0 0 3px rgba(231, 76, 60, 0.15) !important;
    }

    .error-message {
      color: #e74c3c;
      font-size: 12px;
      font-weight: 600;
      margin-top: 5px;
      display: none;
    }
  </style>
  <!-- jsPDF + AutoTable -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.28/jspdf.plugin.autotable.min.js"></script>
</head>
<body>
<div class="progress-bar" id="progressBar"></div>
<div class="container">
  <h1>Personal Detail Form - Intake 43 Day Scholars</h1>
  <form id="personalForm">
    <!-- SECTION 1 -->
    <section class="card">
      <h2 data-section="1">Section 1: Primary Details</h2>
      <div class="form-row">
        <label>Dayscholar Number <span class="required">*</span>
          <input name="dayscholarNo" required placeholder="Enter your dayscholar number"/>
          <div class="error-message">This field is required</div>
        </label>
        <label>Name with Initials <span class="required">*</span>
          <input name="nameInitials" required placeholder="e.g., W.A.S. Silva"/>
          <div class="error-message">This field is required</div>
        </label>
      </div>
      <label>Full Name <span class="required">*</span>
        <input name="fullName" required placeholder="Enter your full name"/>
        <div class="error-message">This field is required</div>
      </label>
      <div class="form-row">
        <label>Faculty <span class="required">*</span>
          <select name="academicStream" required>
            <option value="">Select Faculty</option>
            <option>Faculty of Engineering</option>
            <option>Faculty of Computing</option>
            <option>Faculty of Management and Social Sciences</option>
            <option>Faculty of Defence and Strategic Studies</option>
            <option>Faculty of Law</option>
            <option>Faculty of Medicine</option>
            <option>Faculty of Allied Health Sciences</option>
            <option>Faculty of Criminology and Justice</option>
            <option>Faculty of Technology</option>
          </select>
          <div class="error-message">Please select a faculty</div>
        </label>
        <label>Gender <span class="required">*</span>
          <div class="radio-group">
            <label><input type="radio" name="gender" value="Male" required/> Male</label>
            <label><input type="radio" name="gender" value="Female" required/> Female</label>
          </div>
          <div class="error-message">Please select gender</div>
        </label>
      </div>
      <div class="form-row">
        <label>Email <span class="required">*</span>
          <input type="email" name="email" required placeholder="your.email@example.com"/>
          <div class="error-message">Please enter a valid email address</div>
        </label>
        <label>Contact Number <span class="required">*</span>
          <input type="tel" name="contact" required placeholder="+94 77 123 4567"/>
          <div class="error-message">This field is required</div>
        </label>
      </div>
      <div class="form-row">
        <label>Date of Birth <span class="required">*</span>
          <input type="date" name="dob" required/>
          <div class="error-message">Please select your date of birth</div>
        </label>
        <label>Nationality <span class="required">*</span>
          <input name="nationality" required placeholder="Sri Lankan"/>
          <div class="error-message">This field is required</div>
        </label>
      </div>
      <label>Religion <span class="required">*</span>
        <input name="religion" required placeholder="Buddhism, Christianity, Islam, etc."/>
        <div class="error-message">This field is required</div>
      </label>
    </section>

    <!-- SECTION 2 -->
    <section class="card">
      <h2 data-section="2">Section 2: Physical Details</h2>
      <div class="form-row-3">
        <label>Height (cm) <span class="required">*</span>
          <input name="height" required placeholder="175"/>
          <div class="error-message">This field is required</div>
        </label>
        <label>Weight (kg) <span class="required">*</span>
          <input name="weight" required placeholder="65"/>
          <div class="error-message">This field is required</div>
        </label>
        <label>Blood Group <span class="required">*</span>
          <select name="bloodGroup" required>
            <option value="">Select Blood Group</option>
            <option>A+</option><option>A-</option>
            <option>B+</option><option>B-</option>
            <option>AB+</option><option>AB-</option>
            <option>O+</option><option>O-</option>
          </select>
          <div class="error-message">Please select blood group</div>
        </label>
      </div>
      <div class="form-row-3">
        <label>Chest (cm) <span class="required">*</span>
          <input name="chest" required placeholder="95"/>
          <div class="error-message">This field is required</div>
        </label>
        <label>Neck (cm) <span class="required">*</span>
          <input name="neck" required placeholder="38"/>
          <div class="error-message">This field is required</div>
        </label>
        <label>Waist (cm) <span class="required">*</span>
          <input name="waist" required placeholder="32"/>
          <div class="error-message">This field is required</div>
        </label>
      </div>
      <label>Boot Size <span class="required">*</span>
        <input name="bootSize" required placeholder="9"/>
        <div class="error-message">This field is required</div>
      </label>
    </section>

    <!-- SECTION 3 -->
    <section class="card">
      <h2 data-section="3">Section 3: Other Details</h2>
      <div class="form-row">
        <label>NIC Number <span class="required">*</span>
          <input name="nic" required placeholder="123456789V"/>
          <div class="error-message">This field is required</div>
        </label>
        <label>Nearest Police Station <span class="required">*</span>
          <input name="policeStation" required placeholder="Colombo Police Station"/>
          <div class="error-message">This field is required</div>
        </label>
      </div>
      <div class="form-row">
        <label>Bank Name <span class="required">*</span>
          <input name="bank" required placeholder="Bank of Ceylon"/>
          <div class="error-message">This field is required</div>
        </label>
        <label>Bank Account Number <span class="required">*</span>
          <input name="accountNo" required placeholder="123456789"/>
          <div class="error-message">This field is required</div>
        </label>
      </div>
    </section>

    <!-- SECTION 4: Schools -->
    <section class="card">
      <h2 data-section="4">Section 4: Schools Attended</h2>
      <div class="dynamic-section">
        <div id="schools">
          <div class="dynamic-row">
            <input name="school[]" required placeholder="Enter school name"/>
            <div class="error-message">At least one school is required</div>
          </div>
        </div>
        <button type="button" onclick="addRow('schools','school[]')">+ Add Another School</button>
      </div>
    </section>

    <!-- SECTION 5: Qualifications -->
    <section class="card">
      <h2 data-section="5">Section 5: Educational Qualifications</h2>
      <h3>🎓 GCE O/L Results</h3>
      <div id="ol">
        <div class="form-row">
          <label>Buddhism <span class="required">*</span>
            <select name="ol_buddhism" required>
              <option value="">Select Grade</option>
              <option>A</option><option>B</option><option>C</option><option>S</option><option>W</option>
            </select>
          </label>
          <label>Sinhala Language & Literature <span class="required">*</span>
            <select name="ol_sinhala" required>
              <option value="">Select Grade</option>
              <option>A</option><option>B</option><option>C</option><option>S</option><option>W</option>
            </select>
          </label>
        </div>
        <div class="form-row">
          <label>English <span class="required">*</span>
            <select name="ol_english" required>
              <option value="">Select Grade</option>
              <option>A</option><option>B</option><option>C</option><option>S</option><option>W</option>
            </select>
          </label>
          <label>Mathematics <span class="required">*</span>
            <select name="ol_maths" required>
              <option value="">Select Grade</option>
              <option>A</option><option>B</option><option>C</option><option>S</option><option>W</option>
            </select>
          </label>
        </div>
        <div class="form-row">
          <label>Science <span class="required">*</span>
            <select name="ol_science" required>
              <option value="">Select Grade</option>
              <option>A</option><option>B</option><option>C</option><option>S</option><option>W</option>
            </select>
          </label>
          <label>History <span class="required">*</span>
            <select name="ol_history" required>
              <option value="">Select Grade</option>
              <option>A</option><option>B</option><option>C</option><option>S</option><option>W</option>
            </select>
          </label>
        </div>
        <h4 style="margin: 25px 0 20px 0; color: #2a5298; font-weight: 600;">Basket Subjects <span class="required">*</span></h4>
        <div class="dynamic-row">
          <input name="ol_basket1_sub" required placeholder="Subject name"/> 
          <select name="ol_basket1_res" required>
            <option value="">Grade</option>
            <option>A</option><option>B</option><option>C</option><option>S</option><option>W</option>
          </select>
        </div>
        <div class="dynamic-row">
          <input name="ol_basket2_sub" required placeholder="Subject name"/> 
          <select name="ol_basket2_res" required>
            <option value="">Grade</option>
            <option>A</option><option>B</option><option>C</option><option>S</option><option>W</option>
          </select>
        </div>
        <div class="dynamic-row">
          <input name="ol_basket3_sub" required placeholder="Subject name"/> 
          <select name="ol_basket3_res" required>
            <option value="">Grade</option>
            <option>A</option><option>B</option><option>C</option><option>S</option><option>W</option>
          </select>
        </div>
      </div>
      
      <h3>🎓 GCE A/L Results</h3>
      <div id="al">
        <div class="dynamic-row">
          <input name="al_sub[]" required placeholder="Subject name"/> 
          <select name="al_res[]" required>
            <option value="">Grade</option>
            <option>A</option><option>B</option><option>C</option><option>S</option><option>W</option>
          </select>
        </div>
        <div class="dynamic-row">
          <input name="al_sub[]" required placeholder="Subject name"/> 
          <select name="al_res[]" required>
            <option value="">Grade</option>
            <option>A</option><option>B</option><option>C</option><option>S</option><option>W</option>
          </select>
        </div>
        <div class="dynamic-row">
          <input name="al_sub[]" required placeholder="Subject name"/> 
          <select name="al_res[]" required>
            <option value="">Grade</option>
            <option>A</option><option>B</option><option>C</option><option>S</option><option>W</option>
          </select>
        </div>
        <div class="form-row">
          <label>English <span class="required">*</span>
            <select name="al_english" required>
              <option value="">Select Grade</option>
              <option>A</option><option>B</option><option>C</option><option>S</option><option>W</option>
            </select>
          </label>
          <label>General Knowledge <span class="required">*</span>
            <select name="al_gk" required>
              <option value="">Select Grade</option>
              <option>A</option><option>B</option><option>C</option><option>S</option><option>W</option>
            </select>
          </label>
        </div>
      </div>
    </section>

    <!-- SECTION 6 Sports (Optional) -->
    <section class="card">
      <h2 data-section="6">Section 6: Sports Achievements (Optional)</h2>
      <p style="color: #666; font-style: italic; margin-bottom: 20px;">Complete this section only if you have sports achievements to report.</p>
      <div class="dynamic-section">
        <div id="sports">
          <div class="dynamic-row">
            <input name="sport[]" placeholder="Sport name (e.g., Cricket, Football)"/> 
            <select name="sportLevel[]">
              <option value="">Select Level</option>
              <option>School</option><option>Zonal</option><option>District</option><option>National</option>
            </select>
          </div>
        </div>
        <button type="button" onclick="addRow('sports','sport[]','sportLevel[]')">+ Add Another Sport</button>
      </div>
    </section>

    <!-- SECTION 7 Extra Curricular (Optional) -->
    <section class="card">
      <h2 data-section="7">Section 7: Extra Curricular Activities (Optional)</h2>
      <p style="color: #666; font-style: italic; margin-bottom: 20px;">Complete this section only if you have extra curricular activities to report.</p>
      <div class="dynamic-section">
        <div id="activities">
          <div class="dynamic-row">
            <select name="activityType[]">
              <option value="">Select Activity Type</option>
              <option>Prefect</option><option>Scouting</option><option>Cadeting</option><option>Society</option><option>Other</option>
            </select>
            <input name="activityPosition[]" placeholder="Position held"/>
          </div>
        </div>
        <button type="button" onclick="addRow('activities','activityType[]','activityPosition[]')">+ Add Another Activity</button>
      </div>
    </section>

    <!-- SECTION 8 Languages -->
    <section class="card">
      <h2 data-section="8">Section 8: Language Abilities</h2>
      <p style="margin-bottom: 15px; color: #2a5298; font-weight: 600;">Select all languages you can speak fluently: <span class="required">*</span></p>
      <div class="checkbox-group">
        <div class="checkbox-item">
          <input type="checkbox" name="language" value="Sinhala" id="lang1" required/>
          <label for="lang1">Sinhala</label>
        </div>
        <div class="checkbox-item">
          <input type="checkbox" name="language" value="English" id="lang2"/>
          <label for="lang2">English</label>
        </div>
        <div class="checkbox-item">
          <input type="checkbox" name="language" value="Tamil" id="lang3"/>
          <label for="lang3">Tamil</label>
        </div>
        <div class="checkbox-item">
          <input type="checkbox" name="language" value="Other" id="lang4"/>
          <label for="lang4">Other</label>
        </div>
      </div>
      <div class="error-message" style="display: none;">Please select at least one language</div>
    </section>

    <!-- SECTION 9 Relations -->
    <section class="card">
      <h2 data-section="9">Section 9: Relations in Tri Forces or Police</h2>
      <p style="color: #666; font-style: italic; margin-bottom: 20px;">Complete this section only if you have relations serving in Armed Forces or Police.</p>
      <div class="dynamic-section">
        <div id="relations">
          <div class="dynamic-row"><input name="relation[]" placeholder="Full name of relation"/></div>
        </div>
        <button type="button" onclick="addRow('relations','relation[]')">+ Add Another Relation</button>
      </div>
    </section>

    <!-- SECTION 10 Family -->
    <section class="card">
      <h2 data-section="10">Section 10: Family Details</h2>
      <h3>👨 Father's Details</h3>
      <div class="form-row">
        <label>Full Name <span class="required">*</span>
          <input name="fatherName" required placeholder="Father's full name"/>
          <div class="error-message">This field is required</div>
        </label>
        <label>NIC Number <span class="required">*</span>
          <input name="fatherNic" required placeholder="Father's NIC number"/>
          <div class="error-message">This field is required</div>
        </label>
      </div>
      <div class="form-row">
        <label>Occupation <span class="required">*</span>
          <input name="fatherOcc" required placeholder="Father's occupation"/>
          <div class="error-message">This field is required</div>
        </label>
        <label>Contact Number <span class="required">*</span>
          <input name="fatherContact" required placeholder="Father's phone number"/>
          <div class="error-message">This field is required</div>
        </label>
      </div>
      <label>Residential Address <span class="required">*</span>
        <input name="fatherAddress" required placeholder="Father's complete address"/>
        <div class="error-message">This field is required</div>
      </label>
      
      <h3>👩 Mother's Details</h3>
      <div class="form-row">
        <label>Full Name <span class="required">*</span>
          <input name="motherName" required placeholder="Mother's full name"/>
          <div class="error-message">This field is required</div>
        </label>
        <label>NIC Number <span class="required">*</span>
          <input name="motherNic" required placeholder="Mother's NIC number"/>
          <div class="error-message">This field is required</div>
        </label>
      </div>
      <div class="form-row">
        <label>Occupation <span class="required">*</span>
          <input name="motherOcc" required placeholder="Mother's occupation"/>
          <div class="error-message">This field is required</div>
        </label>
        <label>Contact Number <span class="required">*</span>
          <input name="motherContact" required placeholder="Mother's phone number"/>
          <div class="error-message">This field is required</div>
        </label>
      </div>
      <label>Residential Address <span class="required">*</span>
        <input name="motherAddress" required placeholder="Mother's complete address"/>
        <div class="error-message">This field is required</div>
      </label>
      
      <h3>👫 Siblings Details (Optional)</h3>
      <p style="color: #666; font-style: italic; margin-bottom: 20px;">Complete this section only if you have siblings.</p>
      <div class="dynamic-section">
        <div id="siblings">
          <div class="dynamic-row">
            <input name="sibName[]" placeholder="Sibling's full name"/>
            <input name="sibAge[]" placeholder="Age"/>
            <input name="sibOcc[]" placeholder="Occupation"/>
            <select name="sibStatus[]">
              <option value="">Marital Status</option>
              <option>Single</option><option>Married</option>
            </select>
          </div>
        </div>
        <button type="button" onclick="addRow('siblings','sibName[]','sibAge[]','sibOcc[]','sibStatus[]')">+ Add Another Sibling</button>
      </div>
    </section>

    <!-- Photo + Certify -->
    <section class="card">
      <h2>📷 Document Upload</h2>
      <div class="photo-upload">
        <p style="font-size: 16px; font-weight: 600; color: #2a5298; margin-bottom: 10px;">📸 Upload Recent Passport-Size Photograph <span class="required">*</span></p>
        <input type="file" id="photo" accept="image/*" required/>
        <p style="font-size: 12px; color: #666; margin-top: 15px;">Accepted formats: JPG, PNG, GIF (Maximum file size: 5MB)</p>
        <div class="error-message" style="display: none;">Please upload your photograph</div>
      </div>
      
      <div class="certification">
        <label style="display: flex; align-items: flex-start; gap: 10px; text-align: left;">
          <input type="checkbox" required style="margin-top: 5px; flex-shrink: 0;"/> 
          <span><strong>DECLARATION:</strong> I hereby certify that all the information provided above is true, complete, and accurate to the best of my knowledge. I understand that any false information may result in the rejection of my application or dismissal from the program.</span>
        </label>
        <div class="error-message" style="display: none;">You must accept the declaration to proceed</div>
      </div>
    </section>

    <div class="actions">
      <button type="submit" class="btn primary">📄 Generate PDF Report</button>
      <button type="reset" class="btn">🔄 Clear All Fields</button>
    </div>
  </form>

  <div class="footer">
    <p>Developed and Maintained by</p>
    <p class="copyright">© 2025 Digit Media Solutions (PVT) LTD. All Rights Reserved.</p>
  </div>
</div>

<script>
  // Progress bar functionality
  function updateProgressBar() {
    const form = document.getElementById('personalForm');
    const formHeight = form.scrollHeight;
    const windowHeight = window.innerHeight;
    const scrollTop = window.pageYOffset;
    const progress = (scrollTop / (formHeight - windowHeight)) * 100;
    document.getElementById('progressBar').style.width = Math.min(progress, 100) + '%';
  }

  window.addEventListener('scroll', updateProgressBar);
  
  // Enhanced form validation
  function validateField(field) {
    const errorMsg = field.parentElement.querySelector('.error-message');
    if (field.hasAttribute('required') && !field.value.trim()) {
      field.classList.add('error');
      if (errorMsg) errorMsg.style.display = 'block';
      return false;
    } else {
      field.classList.remove('error');
      if (errorMsg) errorMsg.style.display = 'none';
      return true;
    }
  }

  // Validate email format
  function validateEmail(email) {
    const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
    return emailRegex.test(email);
  }

  // Validate language selection (at least one must be selected)
  function validateLanguages() {
    const languageCheckboxes = document.querySelectorAll('input[name="language"]');
    const errorMsg = document.querySelector('#personalForm .checkbox-group + .error-message');
    const isChecked = Array.from(languageCheckboxes).some(cb => cb.checked);
    
    if (!isChecked) {
      if (errorMsg) errorMsg.style.display = 'block';
      return false;
    } else {
      if (errorMsg) errorMsg.style.display = 'none';
      return true;
    }
  }

  // Real-time validation
  document.addEventListener('input', function(e) {
    if (e.target.matches('input[required], select[required]')) {
      validateField(e.target);
    }
    
    if (e.target.type === 'email') {
      const errorMsg = e.target.parentElement.querySelector('.error-message');
      if (e.target.value && !validateEmail(e.target.value)) {
        e.target.classList.add('error');
        if (errorMsg) {
          errorMsg.textContent = 'Please enter a valid email address';
          errorMsg.style.display = 'block';
        }
      }
    }
  });

  document.addEventListener('change', function(e) {
    if (e.target.name === 'language') {
      validateLanguages();
    }
  });

  function addRow(containerId, ...names) {
    const container = document.getElementById(containerId);
    const div = document.createElement('div');
    div.className = 'dynamic-row';
    
    names.forEach(n => {
      if (n.includes('[]')) {
        if (n.includes('Level')) {
          const sel = document.createElement('select');
          sel.name = n;
          const defaultOption = document.createElement('option');
          defaultOption.value = '';
          defaultOption.text = 'Select Level';
          sel.add(defaultOption);
          ['School','Zonal','District','National'].forEach(l => {
            const o=document.createElement('option');o.text=l;o.value=l;sel.add(o);
          });
          div.appendChild(sel);
        } else if (n.includes('activityType')) {
          const sel=document.createElement('select');sel.name=n;
          const defaultOption = document.createElement('option');
          defaultOption.value = '';
          defaultOption.text = 'Select Activity Type';
          sel.add(defaultOption);
          ['Prefect','Scouting','Cadeting','Society','Other'].forEach(a=>{
            const o=document.createElement('option');o.text=a;o.value=a;sel.add(o);
          });
          div.appendChild(sel);
        } else if (n.includes('sibStatus')) {
          const sel=document.createElement('select');sel.name=n;
          const defaultOption = document.createElement('option');
          defaultOption.value = '';
          defaultOption.text = 'Marital Status';
          sel.add(defaultOption);
          ['Single','Married'].forEach(a=>{const o=document.createElement('option');o.text=a;o.value=a;sel.add(o)});
          div.appendChild(sel);
        } else {
          const inp=document.createElement('input');
          inp.name=n;
          if (n.includes('school')) inp.placeholder = 'Enter school name';
          else if (n.includes('sport')) inp.placeholder = 'Sport name';
          else if (n.includes('activityPosition')) inp.placeholder = 'Position held';
          else if (n.includes('relation')) inp.placeholder = 'Full name of relation';
          else if (n.includes('sibName')) inp.placeholder = 'Sibling full name';
          else if (n.includes('sibAge')) inp.placeholder = 'Age';
          else if (n.includes('sibOcc')) inp.placeholder = 'Occupation';
          div.appendChild(inp);
        }
      }
    });
    
    // Add remove button for dynamic rows
    const removeBtn = document.createElement('button');
    removeBtn.type = 'button';
    removeBtn.innerHTML = '🗑️';
    removeBtn.style.cssText = 'background: linear-gradient(135deg, #e74c3c, #c0392b); color: white; border: none; border-radius: 8px; padding: 10px 15px; cursor: pointer; font-size: 14px; transition: all 0.3s ease;';
    removeBtn.onmouseover = () => removeBtn.style.transform = 'scale(1.1)';
    removeBtn.onmouseout = () => removeBtn.style.transform = 'scale(1)';
    removeBtn.onclick = () => div.remove();
    div.appendChild(removeBtn);
    
    container.appendChild(div);
  }

  // Enhanced form submission with validation
  document.getElementById('personalForm').addEventListener('submit', function(e) {
    e.preventDefault();
    
    const submitBtn = e.target.querySelector('button[type="submit"]');
    let isValid = true;
    
    // Validate all required fields
    const requiredFields = document.querySelectorAll('input[required], select[required]');
    requiredFields.forEach(field => {
      if (!validateField(field)) {
        isValid = false;
      }
    });
    
    // Validate email format
    const emailField = document.querySelector('input[type="email"]');
    if (emailField && emailField.value && !validateEmail(emailField.value)) {
      isValid = false;
    }
    
    // Validate languages
    if (!validateLanguages()) {
      isValid = false;
    }
    
    // Validate file upload
    const photoField = document.querySelector('#photo');
    const photoError = document.querySelector('.photo-upload .error-message');
    if (!photoField.files.length) {
      if (photoError) photoError.style.display = 'block';
      isValid = false;
    } else {
      if (photoError) photoError.style.display = 'none';
    }
    
    // Validate declaration checkbox
    const declarationCheckbox = document.querySelector('.certification input[type="checkbox"]');
    const declarationError = document.querySelector('.certification .error-message');
    if (!declarationCheckbox.checked) {
      if (declarationError) declarationError.style.display = 'block';
      isValid = false;
    } else {
      if (declarationError) declarationError.style.display = 'none';
    }
    
    if (!isValid) {
      // Scroll to first error
      const firstError = document.querySelector('.error');
      if (firstError) {
        firstError.scrollIntoView({ behavior: 'smooth', block: 'center' });
      }
      return;
    }
    
    // If validation passes, proceed with PDF generation
    submitBtn.innerHTML = '📄 Generating PDF Report... <span class="loading"></span>';
    submitBtn.disabled = true;
    
    // Simulate PDF generation process
    setTimeout(() => {
      alert('✅ PDF Report generated successfully! Your form has been processed.');
      submitBtn.innerHTML = '📄 Generate PDF Report';
      submitBtn.disabled = false;
    }, 3000);
  });

  // Auto-save functionality (in memory only)
  const formData = {};
  document.getElementById('personalForm').addEventListener('input', function(e) {
    if (e.target.name) {
      formData[e.target.name] = e.target.value;
    }
  });

  // Enhanced reset functionality
  document.querySelector('button[type="reset"]').addEventListener('click', function(e) {
    e.preventDefault();
    
    if (confirm('⚠️ Are you sure you want to clear all fields? This action cannot be undone.')) {
      document.getElementById('personalForm').reset();
      
      // Clear all error states
      document.querySelectorAll('.error').forEach(el => el.classList.remove('error'));
      document.querySelectorAll('.error-message').forEach(el => el.style.display = 'none');
      
      // Reset dynamic sections to initial state
      const dynamicSections = ['schools', 'sports', 'activities', 'relations', 'siblings'];
      dynamicSections.forEach(sectionId => {
        const section = document.getElementById(sectionId);
        const rows = section.querySelectorAll('.dynamic-row');
        // Keep only the first row, remove others
        for (let i = 1; i < rows.length; i++) {
          rows[i].remove();
        }
        // Clear the first row
        if (rows[0]) {
          const inputs = rows[0].querySelectorAll('input, select');
          inputs.forEach(input => {
            if (input.tagName === 'SELECT') {
              input.selectedIndex = 0;
            } else {
              input.value = '';
            }
          });
        }
      });
      
      // Smooth scroll to top
      setTimeout(() => window.scrollTo({ top: 0, behavior: 'smooth' }), 100);
    }
  });

  // File upload validation
  document.getElementById('photo').addEventListener('change', function(e) {
    const file = e.target.files[0];
    const errorMsg = document.querySelector('.photo-upload .error-message');
    
    if (file) {
      // Check file size (5MB limit)
      if (file.size > 5 * 1024 * 1024) {
        if (errorMsg) {
          errorMsg.textContent = 'File size must be less than 5MB';
          errorMsg.style.display = 'block';
        }
        e.target.value = '';
        return;
      }
      
      // Check file type
      const allowedTypes = ['image/jpeg', 'image/jpg', 'image/png', 'image/gif'];
      if (!allowedTypes.includes(file.type)) {
        if (errorMsg) {
          errorMsg.textContent = 'Please upload a valid image file (JPG, PNG, GIF)';
          errorMsg.style.display = 'block';
        }
        e.target.value = '';
        return;
      }
      
      if (errorMsg) errorMsg.style.display = 'none';
    }
  });

  // Initialize progress bar
  updateProgressBar();
</script>
<script src="personal.js"></script>
</body>
</html>